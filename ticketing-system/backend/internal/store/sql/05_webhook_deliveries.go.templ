{{define "webhook_deliveries_list.sql"}}
SELECT id, webhook_id, event, attempt, status_code, response_body, error, delivered, duration_ms, created_at
FROM webhook_deliveries
WHERE webhook_id = $1
ORDER BY created_at DESC
LIMIT 50
{{end}}

{{define "webhook_deliveries_insert.sql"}}
INSERT INTO webhook_deliveries (webhook_id, event, attempt, status_code, response_body, error, delivered, duration_ms)
VALUES ($1, $2, $3, $4, $5, $6, $7, $8)
RETURNING id
{{end}}
