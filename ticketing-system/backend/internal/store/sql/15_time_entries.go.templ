{{define "time_entries_list.sql"}}
SELECT id, ticket_id, user_id, user_name, minutes, description, logged_at, created_at
FROM time_entries
WHERE ticket_id = $1
ORDER BY logged_at DESC, created_at DESC
{{end}}

{{define "time_entries_total.sql"}}
SELECT COALESCE(SUM(minutes), 0)::int
FROM time_entries
WHERE ticket_id = $1
{{end}}

{{define "time_entries_insert.sql"}}
INSERT INTO time_entries (ticket_id, user_id, user_name, minutes, description, logged_at)
VALUES ($1, $2, $3, $4, $5, $6)
RETURNING id, created_at
{{end}}

{{define "time_entries_delete.sql"}}
DELETE FROM time_entries WHERE id = $1
{{end}}
